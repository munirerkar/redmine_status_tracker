<h2>ğŸ“Š Son Ä°ÅŸ KayÄ±tlarÄ± (Test Paneli)</h2>

<table class="list issues">
  <thead>
    <tr>
      <th># ID</th>
      <th>Konu</th>
      <th>Durum</th>
      <th>OluÅŸturulma Tarihi</th>
    </tr>
  </thead>
  <tbody>
    <% @issues.each do |issue| %>
    <tr class="<%= cycle('odd', 'even') %>">
      <td><%= link_to issue.id, issue_path(issue) %></td>
      <td><%= link_to issue.subject, issue_path(issue) %></td>
      <td><%= issue.status.name %></td>
      <td><%= format_time(issue.created_on) %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<% if @issues.empty? %>
  <p class="nodata">HenÃ¼z hiÃ§ iÅŸ kaydÄ± yok.</p>
<% end %>

<hr />

<div style="width: 500px; margin: 20px auto; text-align: center;">
  <h3>ğŸ“ˆ Ä°ÅŸ Durum DaÄŸÄ±lÄ±mÄ±</h3>
  <canvas id="myStatusChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Controller'dan gelen verileri Javascript'e aktarÄ±yoruz
  // 'raw' komutu Ruby verisini olduÄŸu gibi (tÄ±rnaklarÄ±yla vb.) yazar.
  const etiketler = <%= raw @chart_labels.to_json %>;
  const veriler = <%= raw @chart_data.to_json %>;

  const ctx = document.getElementById('myStatusChart');

  new Chart(ctx, {
    type: 'doughnut', // 'pie' veya 'bar' da yapabilirsin
    data: {
      labels: etiketler,
      datasets: [{
        label: 'Ä°ÅŸ SayÄ±sÄ±',
        data: veriler,
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom',
        }
      }
    }
  });
</script>